{% extends 'main/base.html'%}

{% block head_content %}
<title>Inicio</title>
{% endblock %}

{% block content%}

  {% if recipes %}
    <div class="container pt-5">
      <button class="btn btn-success btn-lg btn-block" type="button" data-toggle="modal" data-target="#new_post_modal">Publicar</button>
    </div>
  {% else %}
    <div class="container pt-5">
      <h2>Para poder publicar necesitas crear una receta</h2>
    </div>
  {% endif %}

    {% for post in list_post %}
      <div class="container offset-md-3 pt-5">
        <div class="card" style="min-width: 400px; max-width: 600px;">
          <div class="card-body">
            <div class="row">
              <div class="col">
                <h4 class="card-title">{{ post.recipe_published.name}}</h4>
                <h6> Autor : {{post.publisher.user.username}}</h6>
                <h6 class="card-text"> Descripción : {{post.description}}</h6>
              </div>
              <div class="col">
                <img src="{{ post.recipe_published.image.url }}" alt="">
                <div class="container pt-3 offset-lg-3">
                  <a class="btn btn-info" type="button" name="button" href="{% url 'get_recipe' post.recipe_published.id_recipe %}">Ver mas</a>
                </div>
              </div>
            </div>

          </div>
          <div class="card-footer bg-transparent">
            <div class="container offset-lg-3">
              <button class="btn btn-success" type="button" name="button">Like</button>
              <button class="btn btn-info" type="button" name="button">Comentar</button>
              <button class="btn btn-primary" type="button" name="button">Compartir</button>
          </div>
          </div>
        </div>
      </div>
    {% empty %}
      <h3 class="container pt-4" style="text-align: center">No hay publicaciones, intenta explorar</h3>
    {% endfor %}

    <div class="modal fade" role="dialog" id="new_post_modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Publica una receta</h4>
            </div>
            <form action="{% url 'new_post' %}" method="post">
              {% csrf_token %}
              <div class="modal-body">
                <h6 class="modal-text">Añade una descripción</h6>
                <div class="form-group">
                  <textarea type="text" name="description" cols="48"  rows="6" placeholder="Añade una descripción" required></textarea>
                </div>
                <h6>Selecciona tu receta</h6>
                <div class="form-group">
                  <select class="form-control" name="recipe_published" required>
                    <option value="">Selecciona una receta</option>
                    {% for recipe in recipes %}
                    <option value="{{recipe.pk}}">{{recipe.name}}</option>
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="modal-footer">
                <button class="btn btn-secondary" type="button" name="button" data-dismiss="modal">Cancelar</button>
                <button class="btn btn-success" type="submit">Guardar</button>
              </div>
            </form>
          </div>
        </div>
    </div>


{% endblock %}
