{% extends 'main/base.html'%}

{% block head_content %}
<title>{{recipe.name}}</title>
{% load static %}
<script async type="text/javascript" src="{% static 'recipes/js/coment_recipe.js' %}" ></script>
{% endblock %}

{% block content%}
<div class="container">
  <div class="row justify-content-center">

    <div class="col">

      <div class="container pt-5">
        <h1>{{recipe.name}}</h1>
      </div>

      <div class="container pt-3">
        <h5>Categoría</h5>
        {{recipe.category}}
      </div>

      <div class="container pt-3">
        <h5>Ingredientes</h5>
        {% for ingredient in ingredients %}
          {{ingredient.ingredient}}<br></br>
        {% endfor %}
      </div>

      <div class="container pt-3">
        <h5>Descripción</h5>
        {{recipe.description}}
      </div>

      <div class="container pt-3">
        <h5>Comentarios</h5>
        {% if not coments %}
          No hay comentarios
        {% else %}
        {% for coment in coments %}
          {{coment.message}}<br></br>
        {% endfor %}
        {% endif %}
        <div class="container pt-2">
          <button class="btn btn-info" type="button" name="button" data-recipe="{{ recipe.id_recipe }}" data-toggle="modal" data-target="#coment_modal">Agregar comentario</button>          
        </div>
      </div>

      <div class="container pt-3 pb-5">
        <h5>Likes</h5>
        {{likes}}
      </div>

    </div>

    <div class="col">
      <div class="container pt-5">
        <img src="{{recipe.image.url}}" alt="No se pudo cargar la imagen">
      </div>
    </div>

  </div>
</div>

<!-- Modal for coment a recipe -->
<div class="modal fade" role="dialog" id="coment_modal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Ingresa tu comentario</h4>
      </div>
      <form action="{% url 'coment_recipe' %}" method="post">
        {% csrf_token %}
        <div class="modal-body">
          <input type="text" name="message" placeholder="Ingresa el comentario" required>
          <input id="input_recipe_coment" type="hidden" name="id_recipe">
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancelar</button>
          <button class="btn btn-success" type="submit" >Comentar</button>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}
